<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}"></title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50">

<div th:replace="~{fragments/tailwind-header :: tailwind-header(pageTitle=${pageTitle})}" th:unless="${#strings.equals(view, 'fragment')}"></div>

<!-- Formulaire -->
<div class="w-full px-4 sm:px-6 lg:px-8 py-8" th:classappend="${#strings.equals(view, 'fragment')} ? 'p-0' : ''">

    <div th:fragment="form-content" class="max-w-4xl mx-auto bg-white rounded-lg p-6" th:classappend="${#strings.equals(view, 'fragment')} ? 'shadow-none border-none' : 'shadow-sm border'">
        <h2 class="text-2xl font-bold text-gray-800 mb-6" th:text="${pageTitle}">Titre du Formulaire</h2>

        <form id="product-form" th:action="@{/produits/save}" th:object="${produit}" method="post">
            <!-- Champ caché pour l'ID -->
            <input type="hidden" th:field="*{id}">

            <!-- Nom du produit -->
            <div class="mb-4">
                <label for="nom" class="block text-sm font-medium text-gray-700 mb-1"><i class="fas fa-tag mr-2"></i>Nom du produit *</label>
                <input type="text" id="nom" th:field="*{nom}"
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                       required>
            </div>

            <!-- Code-barres -->
            <div class="mb-4">
                <label for="codeBarres" class="block text-sm font-medium text-gray-700 mb-1"><i class="fas fa-barcode mr-2"></i>Code-barres</label>
                <input type="text" id="codeBarres" th:field="*{codeBarres}"
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                       placeholder="Optionnel">
            </div>

            <!-- Prix d'achat et Prix de vente -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div>
                    <label for="prixAchat" class="block text-sm font-medium text-gray-700 mb-1"><i class="fas fa-dollar-sign mr-2"></i>Prix d'achat (€)</label>
                    <input type="number" step="0.01" id="prixAchat" th:field="*{prixAchat}"
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                           placeholder="0.00">
                </div>
                <div>
                    <label for="prixVenteUnitaire" class="block text-sm font-medium text-gray-700 mb-1"><i class="fas fa-money-bill-wave mr-2"></i>Prix de vente (€) *</label>
                    <input type="number" step="0.01" id="prixVenteUnitaire" th:field="*{prixVenteUnitaire}"
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                           required placeholder="0.00">
                </div>
            </div>

            <!-- Nom du fournisseur et Numéro de facture -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div>
                    <label for="nomFournisseur" class="block text-sm font-medium text-gray-700 mb-1"><i class="fas fa-building mr-2"></i>Nom du fournisseur</label>
                    <input type="text" id="nomFournisseur" th:field="*{nomFournisseur}"
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                           placeholder="Optionnel">
                </div>
                <div>
                    <label for="numeroFacture" class="block text-sm font-medium text-gray-700 mb-1"><i class="fas fa-file-invoice mr-2"></i>Numéro de facture</label>
                    <input type="text" id="numeroFacture" th:field="*{numeroFacture}"
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                           placeholder="Optionnel">
                </div>
            </div>

            <!-- Catégorie -->
            <div class="mb-4">
                <label for="categorie" class="block text-sm font-medium text-gray-700 mb-1"><i class="fas fa-sitemap mr-2"></i>Familles</label>
                <input type="text" id="categorie" th:field="*{categorie}"
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                       placeholder="Ex: Électronique, Alimentation...">
            </div>

            <!-- Quantité en stock et Date de péremption -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div>
                    <label for="quantiteEnStock" class="block text-sm font-medium text-gray-700 mb-1"><i class="fas fa-boxes-stacked mr-2"></i>Quantité en stock *</label>
                    <input type="number" id="quantiteEnStock" th:field="*{quantiteEnStock}"
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                           required placeholder="0">
                </div>
                <div>
                    <label for="datePeremption" class="block text-sm font-medium text-gray-700 mb-1"><i class="fas fa-calendar-times mr-2"></i>Date de péremption</label>
                    <input type="date" id="datePeremption" th:field="*{datePeremption}"
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                </div>
            </div>

            <!-- Jeton CSRF (sera géré par JS pour l'AJAX) -->
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

        </form>
    </div>
</div>

</body>
</html>
