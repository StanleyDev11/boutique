<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Pagination</title>
</head>
<body>

<div th:fragment="pagination(page, baseUrl, pageParamName)" th:if="${page.totalPages > 1}" class="flex justify-center items-center space-x-4 py-4">
    <nav aria-label="Page navigation">
        <ul class="inline-flex items-center -space-x-px shadow-sm rounded-md">
            <li>
                <a th:href="${page.first} ? '#' : ${baseUrl} + '&' + ${pageParamName} + '=' + ${page.number - 1}"
                   th:classappend="${page.first} ? 'pointer-events-none bg-gray-100 text-gray-400' : 'hover:bg-gray-50'"
                   class="py-2 px-4 ml-0 leading-tight text-gray-600 bg-white rounded-l-lg border border-gray-300 transition-colors duration-200">
                    <i class="fas fa-chevron-left"></i>
                </a>
            </li>

            <!-- Display first page -->
            <li th:if="${page.number > 2}">
                <a th:href="${baseUrl} + '&' + ${pageParamName} + '=0'"
                   class="py-2 px-4 leading-tight text-gray-600 bg-white border border-gray-300 hover:bg-gray-50 transition-colors duration-200">1</a>
            </li>
            <li th:if="${page.number > 3}">
                <span class="py-2 px-4 leading-tight text-gray-600 bg-white border border-gray-300">...</span>
            </li>

            <!-- Display pages around current page -->
            <li th:each="i : ${#numbers.sequence( T(java.lang.Math).max(0, page.number - 2), T(java.lang.Math).min(page.totalPages - 1, page.number + 2) )}">
                <a th:href="${baseUrl} + '&' + ${pageParamName} + '=' + ${i}"
                   th:classappend="${page.number == i} ? 'z-10 bg-blue-100 text-blue-600 border-blue-300' : 'hover:bg-gray-50'"
                   class="py-2 px-4 leading-tight text-gray-600 bg-white border border-gray-300 transition-colors duration-200">
                    <span th:text="${i + 1}"></span>
                </a>
            </li>

            <!-- Display last page -->
            <li th:if="${page.number < page.totalPages - 4}">
                <span class="py-2 px-4 leading-tight text-gray-600 bg-white border border-gray-300">...</span>
            </li>
            <li th:if="${page.number < page.totalPages - 3}">
                <a th:href="${baseUrl} + '&' + ${pageParamName} + '=' + ${page.totalPages - 1}"
                   class="py-2 px-4 leading-tight text-gray-600 bg-white border border-gray-300 hover:bg-gray-50 transition-colors duration-200"
                   th:text="${page.totalPages}"></a>
            </li>

            <li>
                <a th:href="${page.last} ? '#' : ${baseUrl} + '&' + ${pageParamName} + '=' + ${page.number + 1}"
                   th:classappend="${page.last} ? 'pointer-events-none bg-gray-100 text-gray-400' : 'hover:bg-gray-50'"
                   class="py-2 px-4 leading-tight text-gray-600 bg-white rounded-r-lg border border-gray-300 transition-colors duration-200">
                    <i class="fas fa-chevron-right"></i>
                </a>
            </li>
        </ul>
    </nav>
</div>

</body>
</html>
